<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Átirányítás…</title>
  <meta name="robots" content="noindex" />
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color: #1D242A;
      color: #f0f0f0;
      font-family: system-ui, sans-serif;
      text-align: center;
    }
    img {
      max-width: 200px;
      margin-bottom: 1rem;
    }
    p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <!-- Logo fájl a repóban legyen: logo.png -->
  <img src="logo.png" alt="ElectroControl logo" />
  <p>Átirányítás folyamatban… kérjük várjon.</p>

  <script>
    const BOOK_URL  = 'https://wiki.electrocontrol.hu/books/kevin-rpy/chapter/nfc-az-rpyben';
    const LOGIN_URL = 'https://wiki.electrocontrol.hu/login';
    const PUBLIC_URL = 'https://electrocontrol.hu/';
    const TIMEOUT_MS = 1800;

    function probe(url, timeoutMs = TIMEOUT_MS) {
      return new Promise((resolve, reject) => {
        let done = false;
        const t = setTimeout(() => { if (!done) { done = true; reject(new Error('timeout')); } }, timeoutMs);
        fetch(url, { mode: 'no-cors', cache: 'no-store' })
          .then(() => { if (!done) { done = true; clearTimeout(t); resolve(true); } })
          .catch(() => { if (!done) { done = true; clearTimeout(t); reject(false); } });
      });
    }

    (async () => {
      try {
        await probe(BOOK_URL);
        window.location.replace(BOOK_URL);
      } catch {
        try {
          await probe(LOGIN_URL);
          window.location.replace(LOGIN_URL);
        } catch {
          window.location.replace(PUBLIC_URL);
        }
      }
    })();
  </script>
</body>
</html>

