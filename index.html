<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Átirányítás…</title>
</head>
<body>
  <p>Átirányítás folyamatban… kérem várjon.</p>

  <script>
    const INTERNAL_URL = 'https://wiki.electrocontrol.hu/books/kevin-rpy/chapter/nfc-az-rpyben';
    const PUBLIC_URL   = 'https://electrocontrol.hu/';
    const PROBE_PATH   = '/favicon.ico';   // egy kis fájl, ami jó próba
    const TIMEOUT_MS   = 1500;             // 1,5 s várakozás

    function probeInternal() {
      return new Promise((resolve, reject) => {
        let done = false;
        const t = setTimeout(() => { if (!done) { done = true; reject(new Error('timeout')); } }, TIMEOUT_MS);
        fetch(INTERNAL_URL + PROBE_PATH, { mode: 'no-cors', cache: 'no-store' })
          .then(() => { if (!done) { done = true; clearTimeout(t); resolve(true); } })
          .catch(() => { if (!done) { done = true; clearTimeout(t); reject(new Error('failed')); } });
      });
    }

    (async () => {
      try {
        await probeInternal();
        window.location.replace(INTERNAL_URL);
      } catch {
        window.location.replace(PUBLIC_URL);
      }
    })();
  </script>
</body>
</html>
