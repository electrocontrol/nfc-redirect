<script>
  const INTERNAL_URL = 'https://wiki.electrocontrol.hu/books/kevin-rpy/chapter/nfc-az-rpyben';
  const PUBLIC_URL   = 'https://electrocontrol.hu/';
  const PROBE_HOST   = 'https://wiki.electrocontrol.hu';
  const PROBE_PATH   = '/favicon.ico';
  const TIMEOUT_MS   = 1800;

  function probe() {
    return new Promise((resolve, reject) => {
      let done = false;
      const t = setTimeout(() => { if (!done) { done = true; reject(new Error('timeout')); } }, TIMEOUT_MS);
      fetch(PROBE_HOST + PROBE_PATH, { mode: 'no-cors', cache: 'no-store' })
        .then(() => { if (!done) { done = true; clearTimeout(t); resolve(true); } })
        .catch(() => { if (!done) { done = true; clearTimeout(t); reject(); } });
    });
  }

  (async () => {
    try {
      await probe();                 // van Tailscale/DNS
      window.location.href = INTERNAL_URL; // -> ha nem vagy bel√©pve: login, majd vissza erre az oldalra
    } catch {
      window.location.href = PUBLIC_URL;   // nincs Tailscale: publikus oldal
    }
  })();
</script>

